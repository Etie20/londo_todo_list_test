{"version":3,"sources":["../../../src/controllers/auth.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport { CreateUserDto } from '@dtos/users.dto';\r\nimport { RequestWithUser } from '@interfaces/auth.interface';\r\nimport { User } from '@interfaces/users.interface';\r\nimport AuthService from '@services/auth.service';\r\n\r\nclass AuthController {\r\n    public authService = new AuthService();\r\n\r\n    public findAllUsers = async (req: Request, res: Response, next: NextFunction) => {\r\n\r\n    }\r\n    public signUp = async (req: Request, res: Response, next: NextFunction) => {\r\n        try {\r\n            const userData: CreateUserDto = req.body;\r\n            const signUpUserData: User = await this.authService.signup(userData);\r\n\r\n            res.status(201).json({ data: signUpUserData, message: 'signup' });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    };\r\n\r\n    public logIn = async (req: Request, res: Response, next: NextFunction) => {\r\n        try {\r\n            const userData: CreateUserDto = req.body;\r\n            const { token, findUser } = await this.authService.login(userData);\r\n\r\n            res.status(200).json({ data: findUser, message: 'login', token: token });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    };\r\n\r\n    public logOut = async (req: RequestWithUser, res: Response, next: NextFunction) => {\r\n        try {\r\n            const userData: User = req.user;\r\n            const logOutUserData: User = await this.authService.logout(userData);\r\n\r\n            res.setHeader('Set-Cookie', ['Authorization=; Max-age=0']);\r\n            res.status(200).json({ data: logOutUserData, message: 'logout' });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    };\r\n}\r\n\r\nexport default AuthController;"],"names":["AuthService","AuthController","authService","findAllUsers","req","res","next","signUp","userData","signUpUserData","error","body","signup","status","json","data","message","logIn","token","findUser","login","logOut","logOutUserData","user","logout","setHeader"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,OAAOA,iBAAiB,yBAAyB;AAEjD,IAAA,AAAMC,iBAAN,SAAMA;;4BAAAA;;IACF,uBAAOC,eAAc,IAAIF;IAEzB,uBAAOG;mBAAe,oBAAA,SAAOC,KAAcC,KAAeC;;;;;;QAE1D;wBAF6BF,KAAcC,KAAeC;;;;IAG1D,uBAAOC;mBAAS,oBAAA,SAAOH,KAAcC,KAAeC;gBAEtCE,UACAC,gBAGDC;;;;;;;;;;wBAJCF,WAA0BJ,IAAIO,IAAI;wBACX;;4BAAM,MAAKT,WAAW,CAACU,MAAM,CAACJ;;;wBAArDC,iBAAuB;wBAE7BJ,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMN;4BAAgBO,SAAS;wBAAS;;;;;;wBAC1DN;wBACLJ,KAAKI;;;;;;;;;;;QAEb;wBATuBN,KAAcC,KAAeC;;;;IAWpD,uBAAOW;mBAAQ,oBAAA,SAAOb,KAAcC,KAAeC;gBAErCE,UACsB,MAApBU,OAAOC,UAGVT;;;;;;;;;;wBAJCF,WAA0BJ,IAAIO,IAAI;wBACZ;;4BAAM,MAAKT,WAAW,CAACkB,KAAK,CAACZ;;;wBAA7B,OAAA,eAApBU,QAAoB,KAApBA,OAAOC,WAAa,KAAbA;wBAEfd,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMI;4BAAUH,SAAS;4BAASE,OAAOA;wBAAM;;;;;;wBACjER;wBACLJ,KAAKI;;;;;;;;;;;QAEb;wBATsBN,KAAcC,KAAeC;;;;IAWnD,uBAAOe;mBAAS,oBAAA,SAAOjB,KAAsBC,KAAeC;gBAE9CE,UACAc,gBAIDZ;;;;;;;;;;wBALCF,WAAiBJ,IAAImB,IAAI;wBACF;;4BAAM,MAAKrB,WAAW,CAACsB,MAAM,CAAChB;;;wBAArDc,iBAAuB;wBAE7BjB,IAAIoB,SAAS,CAAC;4BAAe;;wBAC7BpB,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMO;4BAAgBN,SAAS;wBAAS;;;;;;wBAC1DN;wBACLJ,KAAKI;;;;;;;;;;;QAEb;wBAVuBN,KAAsBC,KAAeC;;;;;AAahE,eAAeL,eAAe"}
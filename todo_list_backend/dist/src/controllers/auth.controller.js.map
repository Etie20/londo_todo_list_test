{"version":3,"sources":["../../../src/controllers/auth.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport { CreateUserDto } from '@dtos/users.dto';\r\nimport { RequestWithUser } from '@interfaces/auth.interface';\r\nimport { User } from '@interfaces/users.interface';\r\nimport AuthService from '@services/auth.service';\r\n\r\nclass AuthController {\r\n    public authService = new AuthService();\r\n\r\n    public findAllUsers = async (req: Request, res: Response, next: NextFunction) => {\r\n\r\n    }\r\n    public signUp = async (req: Request, res: Response, next: NextFunction) => {\r\n        try {\r\n            const userData: CreateUserDto = req.body;\r\n            const signUpUserData: User = await this.authService.signup(userData);\r\n\r\n            res.status(201).json({ data: signUpUserData, message: 'signup' });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    };\r\n\r\n    public logIn = async (req: Request, res: Response, next: NextFunction) => {\r\n        try {\r\n            const userData: CreateUserDto = req.body;\r\n            const { token, findUser } = await this.authService.login(userData);\r\n\r\n            res.status(200).json({ data: findUser, message: 'login', token: token });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    };\r\n\r\n    public logOut = async (req: RequestWithUser, res: Response, next: NextFunction) => {\r\n        try {\r\n            const userData: User = req.user;\r\n            const logOutUserData: User = await this.authService.logout(userData);\r\n\r\n            res.setHeader('Set-Cookie', ['Authorization=; Max-age=0']);\r\n            res.status(200).json({ data: logOutUserData, message: 'logout' });\r\n        } catch (error) {\r\n            next(error);\r\n        }\r\n    };\r\n}\r\n\r\nexport default AuthController;"],"names":["AuthController","authService","AuthService","findAllUsers","req","res","next","signUp","userData","body","signUpUserData","signup","status","json","data","message","error","logIn","token","findUser","login","logOut","user","logOutUserData","logout","setHeader"],"mappings":";;;;+BA+CA;;;eAAA;;;oEA3CwB;;;;;;;;;;;;;;;;;;;AAExB,IAAA,AAAMA,iBAAN,MAAMA;;QACF,uBAAOC,eAAc,IAAIC,oBAAW;QAEpC,uBAAOC,gBAAe,OAAOC,KAAcC,KAAeC,QAE1D;QACA,uBAAOC,UAAS,OAAOH,KAAcC,KAAeC;YAChD,IAAI;gBACA,MAAME,WAA0BJ,IAAIK,IAAI;gBACxC,MAAMC,iBAAuB,MAAM,IAAI,CAACT,WAAW,CAACU,MAAM,CAACH;gBAE3DH,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMJ;oBAAgBK,SAAS;gBAAS;YACnE,EAAE,OAAOC,OAAO;gBACZV,KAAKU;YACT;QACJ;QAEA,uBAAOC,SAAQ,OAAOb,KAAcC,KAAeC;YAC/C,IAAI;gBACA,MAAME,WAA0BJ,IAAIK,IAAI;gBACxC,MAAM,EAAES,KAAK,EAAEC,QAAQ,EAAE,GAAG,MAAM,IAAI,CAAClB,WAAW,CAACmB,KAAK,CAACZ;gBAEzDH,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMK;oBAAUJ,SAAS;oBAASG,OAAOA;gBAAM;YAC1E,EAAE,OAAOF,OAAO;gBACZV,KAAKU;YACT;QACJ;QAEA,uBAAOK,UAAS,OAAOjB,KAAsBC,KAAeC;YACxD,IAAI;gBACA,MAAME,WAAiBJ,IAAIkB,IAAI;gBAC/B,MAAMC,iBAAuB,MAAM,IAAI,CAACtB,WAAW,CAACuB,MAAM,CAAChB;gBAE3DH,IAAIoB,SAAS,CAAC,cAAc;oBAAC;iBAA4B;gBACzDpB,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMS;oBAAgBR,SAAS;gBAAS;YACnE,EAAE,OAAOC,OAAO;gBACZV,KAAKU;YACT;QACJ;;AACJ;MAEA,WAAehB"}